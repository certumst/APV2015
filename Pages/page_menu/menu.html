<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Album Promo Vidéo 2015</title>
        
        <link href="../css/bootstrap/bootstrap.css" rel="stylesheet" type="text/css">
        <link href="../css/main2015.css" rel="stylesheet" type="text/css">
        <!-- Chargement des librairies -->
        <script src="../js/jquery/jquery.js" type="text/javascript"></script>
        <script src="../js/bootstrap/bootstrap.js" type="text/javascript"></script>
        <script src="../js/jquery.scrollTo.min.js" type="text/javascript"></script>
        <script src="../js/list.js" type="text/javascript"></script>
        <script src="../js/underscore-min.js" type="text/javascript"></script>
        <script src="../js/jquery.scrollTo.min.js" type="text/javascript"></script>
        <!-- Chargement des données des images et vidéos -->
        <script src="navigation_page_json.js" type="text/javascript"></script> 
        <!-- <script src="../../Donnees/bdd_site_jtx.js" type="text/javascript"></script>  -->
        <script src="../../Donnees/projs_json_true.js" type="text/javascript"></script> 
        <script src="../../Donnees/videos_json_true.js" type="text/javascript"></script> 
        <script src="../../Donnees/added_projs.js" type="text/javascript"></script>  
        <script src="../../Donnees/added_videos.js" type="text/javascript"></script>          
        <script src="../../patch/patch_projs.js" type="text/javascript"></script>    
        <script src="../../patch/patch_videos.js" type="text/javascript"></script>                   
        <!-- <script src="../../data/display.js" type="text/javascript"></script> -->
        <!-- <script src="../../data/videos.js" type="text/javascript"></script> -->
    </head>

    <body>
        <nav class="navbar navbar-dark bg-dark fixed-top navbar-expand-sm">
                    <a class="navbar-brand" href="#">
                      <img src="../img/logo_2015_white.png"  height="30" class="d-inline-block align-top" alt="">
                    Album Promo Vidéo
                    </a>
                    <div class="collapse navbar-collapse" id="navbarNav">
                            <ul class="navbar-nav">
                                    <li class="nav-item active">
                                      <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                                    </li>
                                    <li class="nav-item active">
                                            <a class="nav-link hover_pointer" onclick=" $('body').scrollTo('#section_projs',500)" >Projs en .K</a>
                                    </li>
                                    <li class="nav-item active">
                                            <a class="nav-link hover_pointer" onclick=" $('body').scrollTo('#section_evnts',500)" >Évènements</a>
                                    </li>
                                    <li class="nav-item active">
                                            <a class="nav-link hover_pointer" onclick=" $('body').scrollTo('#section_spectacles',500)" >Spectacles</a>
                                    </li>
                                    <li class="nav-item active">
                                            <a class="nav-link hover_pointer" onclick=" $('body').scrollTo('#section_inter',500)" >Interviews</a>
                                    </li>
                            </ul>   
                    </div>
                    <form class="form-inline">
                            <input class="form-control mr-sm-2" id="recherche_input" type="search" placeholder="Rechercher  " aria-label="Search">
                    </form>
        </nav>

        <div class="collapse fixed-top bg-dark text-light" id="recherche_results" style="top:50px;padding-top:20px;">
                
 
                         <div id="users" class="text-dark">
                                 <!-- <input type="text" class="form-control search" placeholder="Rechercher" id="search_field" > -->
                                  
                                 
                                 <!-- Child elements of container with class="list" becomes list items -->
                                   <div  class="list card-group  d-flex justify-content-center col-12" id="list_recherche">
                                       
                                         <div class="card card_list" style="max-width:12em;" onclick="go_to(this.children[0].innerHTML, this.children[1].innerHTML)">
                                             <span class="proj" style="display:none;"></span>
                                             <span class="id" style="display:none;"></span>
                                             <span class="type" style="display:none;"></span>
                                             <img class="card-img-top screenshot image" src="../img/logo 2015.jpg" alt="Card image cap" >
                                             <div class="card-body p-2">
                                                 <h5 class="titre card-title m-0 text-capitalize"></h5>
                                                 <!-- <span class="badge badge-dark">JTX<span class="promo"></span></span> -->
                                                 <span class="badge badge-warning">Vidéo</span>
                                                 
                                                 <span style="width:100%;" class=" badge proj_name text-truncate"></span>
                                             </div>
                                             
                                         </div>
                                     </div>
                         
                                    
                                 
                                 <div class="d-flex justify-content-center m-4">
                                         <ul class="pagination" id="pag"  ></ul>
                                 </div>
                                
                         </div>
 
         </div>

        <div class="container">
                <div id="sponsor_div" class="rounded-right">
                        <p class="lead text-light m-2 text-center">Merci à</p>
                        <img src="../img/sponsors/ax.png" alt="" class="sponsor_img m-2" style="max-width:5em;">
                        <img src="../img/sponsors/forum.png" alt="" class="sponsor_img m-2" style="max-width:5em;">
                        <img src="../img/sponsors/xprojet.png" alt="" class="sponsor_img m-2" style="max-width:5em;">
                        <img src="../img/sponsors/xpassion.png" alt="" class="sponsor_img m-2" style="max-width:5em;">
                        <img src="../img/sponsors/fx.png" alt="" class="sponsor_img m-2" style="max-width:5em;">
                    </div>

            <div class="col-12" style="height:100px;"></div>
            <div class="d-flex justify-content-center">
                <div>
                    <img id="main_image" src="../img/logo_2015_navbar.png" alt="" style="width:50em;" >
                    
                </div>
            </div>

            <div class="col-12" style="height:100px;"></div>
            
            <div class="d-flex">
                <div class="col-3">
                    
                    <div class="card bg-light text-center hover_card hover_pointer" onclick=" $('body').scrollTo('#section_projs',500)">
                        <div class="card-body  " style="padding:0;">
                            <div class="p-3">
                                    <h5 class="card-title">Projections JTX</h5>
                                    <h6 class="card-subtitle mb-2 text-muted">JTX2014, JTX2015 & JTX2016</h6>
                                    <p class="card-text">Retrouvez toutes les projections qui ont animé la vie des promos en .K!</p>
                            </div>
                            
                            <!-- <a href="#" class="btn col-12 p-2 btn-main" style="background-color:rgba(26, 188, 156,1.0);color:white;border:none;margin:0;">Y aller!</a> -->
                        </div>
                    </div>
                    <div class="parallelogram_green"></div>
                </div>

                <div class="col-3">
                       
                        <div class="card bg-light text-center hover_card" onclick=" $('body').scrollTo('#section_evnts',500)">
                            <div class="card-body  " style="padding:0;">
                                <div class="p-3">
                                        <h5 class="card-title">Évènements promotion</h5>
                                        <h6 class="card-subtitle mb-2 text-muted">Inkhorpo, WEI, etc.</h6>
                                        <p class="card-text">Retrouvez toutes les projections créées et diffusées lors d'évènements!</p>
                                </div>
                                
                                <!-- <a href="#" class="btn col-12 p-2 btn-main" style="background-color:rgba(52, 152, 219,1.0);color:white;border:none;margin:0;">Y aller!</a> -->
                            </div>
                        </div>
                        <div class="parallelogram_blue"></div>
                    </div>


                    <div class="col-3">
                            
                            <div class="card bg-light text-center hover_card" onclick=" $('body').scrollTo('#section_spectacles',500)">
                                <div class="card-body  " style="padding:0;">
                                    <div class="p-3">
                                            <h5 class="card-title">Spectacles</h5>
                                            <h6 class="card-subtitle mb-2 text-muted">D'Aladdin à Holliner</h6>
                                            <p class="card-text">Les meilleurs spectacles que vous avez pu voir en deux ans de folie!</p>
                                    </div>
                                    
                                    <!-- <a href="#" class="btn col-12 p-2 btn-main" style="background-color:rgba(142, 68, 173,1.0);color:white;border:none;margin:0;">Y aller!</a> -->
                                </div>
                            </div>
                            <div class="parallelogram_violet"></div>
                        </div>

                        <div class="col-3">
                                
                                <div class="card bg-light text-center hover_card" onclick=" $('body').scrollTo('#section_inter',500)">
                                    <div class="card-body  " style="padding:0;">
                                        <div class="p-3">
                                                <h5 class="card-title">Interviews exlusives</h5>
                                                <h6 class="card-subtitle mb-2 text-muted">Les personnages de la vie militaire</h6>
                                                <p class="card-text">Retrouvez des exclusivités comme l'interview de Jacques Biot! </p>
                                        </div>
                                        
                                        <!-- <a href="#" class="btn col-12 p-2 btn-main" style="background-color:rgba(230, 126, 34,1.0);color:white;border:none;margin:0;">Y aller!</a> -->
                                    </div>
                                </div>
                                <div class="parallelogram_orange"></div>
                            </div>

               
                

            </div>

            
            <div class="col-12" style="height:165px;"></div>
       
        </div>
        
        <div class="container-fluid" style="background-color:#2c3e50"  id="section_ax">
            
            <div class="container">
                    <div class="col-12" style="height:50px;"></div>
                    <!-- <h1 class="display-3 text-white">Le mot des anciens</h1>
                    <div class="dropdown-divider"></div> -->
                    <div class="d-flex">
                        <div class="col-6">
                            <p class="text-center text-light">Le mot de l'AX</p>
                            <video src="/" controls style="width:100%">

                            </video>
                            
                        </div>
                        <div class="col-6">
                            <p class="text-center text-light">Le mot de la FX</p>
                            <video src="/" controls style="width:100%">

                            </video>
                        </div>
                    </div>
                    <div class="col-12" style="height:150px;"></div>
            </div>  

        </div>

        <div class="container-fluid" style="background-color:rgba(26, 188, 156,1.0);">
            
            
        </div>

        <!-- PROJECTIONS JTX -->
        <div class="container-fluid" style="background-color:rgba(26, 188, 156,1.0);"  id="section_projs">
            <div class="container">

                <div class="col-12" style="height:50px;"></div>
                <h1 class="display-3 text-white">Projections JTX</h1>
                <div class="dropdown-divider"></div>

                <div id="projs_JTX">
                        <div  class="list d-flex col-12 flex-wrap">
                            
                        </div>
                </div>

                <div class="col-12" style="height:50px;"></div>

            </div>
        </div>



        <!-- EVENEMENTS -->
        <div class="container-fluid" style="background-color:rgba(52, 152, 219,1.0);"  id="section_evnts">
            
            <div class="container">
                <div class="col-12" style="height:50px;"></div>
                <h1 class="display-3 text-white">Évènements</h1>
                <div class="dropdown-divider"></div>

                <div id="evenements">
                        <div class="list d-flex col-12 flex-wrap" id="list_events">

                           
                        </div>
                </div>
                
                <div class="col-12" style="height:50px;"></div>

            </div>
        </div>

        <div class="container-fluid" style="background-color:rgba(142, 68, 173,1.0);" id="section_spectacles">
                
                <div class="container">
                        <div class="col-12" style="height:50px;"></div>
                        <h1 class="display-3 text-white">Spectacles</h1>
                        <div class="dropdown-divider"></div>
                        <div id="spectacles">
                                <div class="list d-flex col-12 flex-wrap" id="list_specs">
        
                                   
                                </div>
                        </div>
                </div>  

        </div>

        <div class="container-fluid" style="background-color:rgba(230, 126, 34,1.0);"  id="section_inter">
                
                <div class="container">
                        <div class="col-12" style="height:50px;"></div>
                        <h1 class="display-3 text-white">Interviews</h1>
                        <div class="dropdown-divider"></div>
                        <div id="inter">
                                <div class="list d-flex col-12 flex-wrap" id="list_inter">
        
                                   
                                </div>
                        </div>
                </div>  

        </div>


        <div class="container-fluid" style="background-color:#343A40;"  id="footer">
                
                <div class="container">
                        <div class="col-12" style="height:150px;"></div>
                        <!-- <h1 class="display-3 text-white">Le mot des anciens</h1>
                        <div class="dropdown-divider"></div> -->
                        <div class="d-flex justify-content-center">
                            <div class="col-6">
                                <p class="text-center text-light font-weight-light">APV2015 - All Rights Reserved<br>
                                    <span class="font-italic">Merci à tous nos sponsors et à toute l'équipe de l'APV2015!</span>
                                </p>
                                
                            </div>
                           
                        </div>
                        <div class="d-flex justify-content-between col-12" style="width:100%;">
                                <img src="../img/sponsors/ax.png" alt="" class="sponsor_img m-2" style="max-height:100px;">
                                <img src="../img/sponsors/forum.png" alt="" class="sponsor_img m-2" style="max-height:100px;">
                                <img src="../img/sponsors/xprojet.png" alt="" class="sponsor_img m-2" style="max-height:100px;">
                                <img src="../img/sponsors/xpassion.png" alt="" class="sponsor_img m-2" style="max-height:100px;">
                                <img src="../img/sponsors/fx.png" alt="" class="sponsor_img m-2" style="max-height:100px;">
                            </div>
                        <div class="col-12" style="height:50px;"></div>
                </div>  
    
            </div>
    </body>

    <script>
        G_projs_json = G_projs_json.concat(added_projs).concat(patch_projs)
        G_videos_json = G_videos_json.concat(added_videos).concat(patch_videos)

        //Initialisation de la liste des projs :
        
        var item_string = '<div class="col-3" style="margin-bottom:10px;"> <div class="card card_list link_proj"><img class="card-img-top proj_image" src="" alt="Card image cap" ><a class="id invisible" href=""></a><div class="card-body p-2"><h5 class="titre card-title m-0"></h5><h6 class="titre_op"></h6><div class="d-flex w-100 justify-content-between align-items-center"><span class="mb-1 jtx"></span><small class="duree"></small></div></div></div></div>';
        var projs_JTX_options = {
            valueNames: [ 'titre', 'titre_op',  'jtx', 'duree', { name: 'proj_image', attr: 'src' },{ name: 'id', attr: 'href' }],
            item : item_string,
        }
        var LIST_projs_JTX = new List('projs_JTX',projs_JTX_options, G_projs_json.filter(proj => proj.category==8));
        //Pour que les clicks sur les cards nous emmènent au bout de la nuit :
        $(".link_proj").click(function() {
            window.location = '../page_contenu/contenu.html#proj='+$(this).find("a").attr("href"); 
            return false;
        });



        var template_evnt = `
        <div class="col-3 p-1">
    <div class="card ">
        <!-- The innerHTML of children with class="name" becomes this items "name" value -->
        <img class="card-img-top" src="<%= evnt_image %>" alt="Card image cap">
        <div class="card-body p-2">
            <h5 class="titre card_list card-title m-0" data-toggle="collapse" data-target="<%= "#" + collapse_id %>" aria-expanded="false" role="button"><%= titre %></h5>
            <div id="<%= collapse_id %>" class="collapse collapse_id" style="padding-top:10px;">

                <ul class="nav nav-tabs" role="tablist">
                    <% for(k=0;k<content.length;k++){ %>
                        <li class="nav-item">
                                <a class="nav-link <% if(k==0){print("active")} %>"  data-toggle="tab" href="<%= "#" + collapse_id + content[k].annee %>" role="tab" aria-controls="home" aria-selected="true"> <%= content[k].annee %> </a>
                        </li>
                    <% } %>
                </ul>

                <div class="tab-content" id="myTabContent">
                    <% for(k=0;k<content.length;k++){ %>
                        <div class="tab-pane fade   <% if(k==0){print("show active")} %>" id="<%= collapse_id + content[k].annee %>" role="tabpanel" >
                            <div class="list-group  list-group-flush">
                                <% for(l=0;l<content[k].projs.length;l++){ %>
                                    <a href="../page_contenu/contenu.html#proj=<%= content[k].projs[l].proj_id %>" class="list-group-item list-group-item-action"> <%= content[k].projs[l].titre %></a>
                                <% } %>
                            </div>
                        </div>
                    <% } %>
                </div>

            </div>
        </div>
    </div>
</div>
        `

        // Pour remplir la liste des eventments depuis le JSON avec le template ci dessus. 
        var compiled_event = _.template(template_evnt);
        for(e_index=0;e_index<G_liste_evenements.length;e_index++){
            document.getElementById('list_events').innerHTML += compiled_event(G_liste_evenements[e_index])
        }

        // Pour fermer les autres evnts quand on clique sur l'un.
        $('.collapse_id').on('show.bs.collapse', function (e) {
            for(k=0;k<G_liste_evenements.length;k++){
                if(G_liste_evenements[k].collapse_id != e.target.id){
                    $('#'+G_liste_evenements[k].collapse_id).collapse('hide');
                }
            }
        })

        
        var template_video = `
        <div class = "col-3 p-1">
                                        <div class="card card_list" onclick="go_to(this.children[0].innerHTML, this.children[1].innerHTML)">
                                             <span class="proj" style="display:none;"><% if(type=="video"){print(proj);}else{print(id)} %></span>
                                             <span class="id" style="display:none;"><% if(type=="video"){print(id);}%></span>
                                             <span class="type" style="display:none;"><%= type %></span>
                                    
                                             <img class="card-img-top" src="<% if(type=="video"){print(screenshot);}else{print(image)} %>" alt="Card image cap" >
                                             <div class="card-body p-2">
                                                 <h5 class="titre card-title m-0 text-capitalize"><%= titre %></h5>
                                                <% if(type=='proj'){ %>
                                                    <span class="badge badge-success">Proj</span>
                                                <% } else { %>
                                                    <span class="badge badge-warning">Vidéo</span>
                                                <% } %>
                                             </div>
                                             
                                         </div>
        </div>
        `
        var compiled_video = _.template(template_video);          
        for(v=0;v<G_liste_spectacles.length;v++){
            if(G_liste_spectacles[v].type=="video"){
                document.getElementById('list_specs').innerHTML+=compiled_video(G_videos_json.find(e=>e.id==G_liste_spectacles[v].id))
            }
            else{
                document.getElementById('list_specs').innerHTML+=compiled_video(G_projs_json.find(e=>e.id==G_liste_spectacles[v].id))                
            }
        }

        //Remplissage des interviews : 
        for(v=0;v<G_liste_inter.length;v++){
            if(G_liste_inter[v].type=="video"){
                document.getElementById('list_inter').innerHTML+=compiled_video(G_videos_json.find(e=>e.id==G_liste_inter[v].id))
            }
            else{
                document.getElementById('list_inter').innerHTML+=compiled_video(G_projs_json.find(e=>e.id==G_liste_inter[v].id))                
            }
        }
    </script>

    <script src="../js/recherche_js.js" type="text/javascript"></script>

</html> 